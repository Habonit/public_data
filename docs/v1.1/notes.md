# v1.0 -> v1.1

- 업로드 방식으로 전환
	- 현재는 data/*.csv를 읽어서 app이 구동
	- csv를 업로드해서 dataframe을 읽는 방식을 채택
	
- 약간의 상호작용만 생겨도 갑자기 로딩이 엄청나게 생김
	- data/*.csv를 읽는 걸 매번 변화 때마다 하는 거 같아요.
	- session_state와 cache를 이용해서 극복
	- 그래서 한 번 업로드 하면 아무리 상호작용 생겨도 새로 읽지 않도록 함 
	
- 시각화가 좀 투박해서 plotly를 이용해서 시각화한 데이터가 좀 예쁜 색깔로 나왔으면 좋겠습니다.
- 시각화가 좀 단조롭습니다. 히스토그램, 박스플롯, kde, 산점도 등 다양한 시각화가 나왔으면 좋겠습니다. 

- 지도 시각화에서는 limit전체 개수에 limit을 걸어서 병목이 생기지 않도록 할게요. 
	
- 탭에서 기차, 테스트라고 잘못 번역된 걸 훈련 데이터, 테스트 데이터라고 수정하여 표기합니다. 

- 데이터 시각화 탭에서 결측치가 많은 칼럼(30% 이상)에 대해서는 warning알림을 출력하여 결측치 많은 칼럼을 알려줘야 함.


- 교차 데이터 분석에서 통합지도 시각화를 제외하고 근접성 분석은 제외해주세요. 

- 프록젝트 개요 페이지에서 각 탭에 필요한 데이터셋을 업로드 할 수 있게 해야할 거 같아요. 
	- cctv 쪽 데이터를 업로드하면 cctv 쪽 시각화가 활성화
	- 이런 식으로 움직여야 해요. 
	- 그 밖에는 데이터셋의 파일 크기 정도가 나왔으면 합니다.
	- 만약에 업로드를 안한 채로 시각화 화면으로 가면 업로드부터 하라고 나올 것
	
	
- 챗봇을 달 거에요. 업로드한 데이터셋을 설명해주는 챗봇을 달 거에요. 
	- 그 파일을 업로드 해야만 데이터셋이 답변할 수 있게 되어야 합니다.
	- 챗봇은 새로운 탭에서 데이터 질의응답 탭으로 놓고 업로드가 된 데이터에 대해선 select가 가능하게 만들어야 합니다.

- 그 챗봇을 달 거면, anthropic의 언어모델을 써서 챗봇을 구성.
	- 사이드탭에서 api key 입력하고 셀렉트 박스에서 모델 선택할 수 있게 하겠습니다
	- 챗봇에서 사용한 전체 토큰, 입력 토큰, 출력 토큰 이렇게 3가지가 사이드 바에 나오도록 할게요. 
	- 그리고 데이터 업로드 현황이 사이드 바에 나와야 합니다. 

# 2025-12-01

ModuleNotFoundError: No module named 'anthropic', 이런 에러가 납니다. requirements.txt를 프로젝트에 맞춰 최신화해주세요. 


# 아쉬운 점

- 업로드하면 업로드가 완료가 되었음에도 무언가 로딩이 많이 걸립니다. 

- 사이드바에 있는 모델이 최신화가 되어 있지 않음.
	https://platform.claude.com/docs/en/get-started#python 참고하여
	클로드 4.5
	opus 4.5
	haiku 4.5
	이 세가지 모델을 모두 쓸 수 있게 후보군으로 셀렉할 수 있게 해 

- 어떻게 csv를 분석하고 있는 것인가
	utils/chatbot.py 에서 일부 dataframe 정보, 샘플링한 데이터프레임 정보만 프롬프트에 넣어서 왔다갔다하고 있음
	그래서 데이터 프레임을 샘플링해서 질의하면 이런 게 잘 안나오겠죠
	tool_calling 기법으로 이를 극복할 것입니다. 
	data/*.csv를 보고 분석하는 데 필요한 tool 15개 작성해서 복잡한 질문에도 tool 을써서 대응할 수 있게 해주세요.

- 새로운 파일을 업로드하고 지도를 출력할 때 병목이 걸리는 거거 아닌가 의심이 듭니다. 

- 지도에서 줌인 줌아웃을 하면 사용자와의 인터렉티브로 인식되어 중간중간 병목이 걸리는 거 아닌가 합니다.

- 아무런 변화도 안줬는데 갑자기 caption모드가 되면서 병목이 걸리는 상황이 연출됩니다. 

- 질의응답과정에서 한 데이터셋 기반으로 대화를 하다가 다른 데이터셋으로 넘어갔을 때, 이전 데이터셋을 기반으로 대화한 내역이 남으면 안됩니다. 대화 context는 분석할 데이터셋에 따라서 변동되어야 합니다. 즉, 보안등에 대해서 대화하다가 다시 cctv 데이터로 넘어가면, 맥락은 cctv 데이터 기반으로 남아야 합니다. 그리고 하단부에 대화 삭제하면 해당 데이터셋에 의존하고 있는 맥락 데이터만 삭제

- 대화가 출력될 때, 챗봇 상태에서, 스트리밍의 형태로 나오지 않는다. 

